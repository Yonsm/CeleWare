# BabyNes for iPad 网络数据接口规范
----

#I. 概述

客户端与服务端数据交互通过 HTTP/HTTPS 传输。

* 参数：
    * 使用 HTTP GET 中的 URL Query 传给服务端；
    * 多个 Query 参数使用 & 连接，无先后顺序；
    * *(不?)*需做 URL Escape；
    * 大块数据使用 HTTP POST 上传；
    * 固定参数（KEY名称大小写另行约定，为阅读方便下文将全部使用大写）：
	    * **LANG**：语言（或把此参数绑定到 token 中？）
    	* **TOKEN**：验签信息，除登录接口之外都有。

* 返回：
    * 数据内容使用 JSON格式；
    * 文本编码为UTF-8；
    * 例子（KEY名称大小写另行约定，为阅读方便下文将全部使用大写）：
    
			{
				CODE:200, // 结果代码：0~199 保留；200 表示成功（此时没有 INFO 字段）；201~999 需和客户端约定（下面功能中将只描述这个区段的部分）；其它数值表示错误，可由服务端自选使用
				
				INFO:"调用成功", // 用于解释 code 的文字信息，应根据所有接口均传入的 lang 参数返回相应语言的文本，可能会展示给最终用户
				
				DATA: {...} //* 结果数据，必须是 dict 类型（或任意类型？），所有基本类型字段均使用字符串类型
			}

#II. 功能

##1. 登录

* 名称：**LOGIN**
* 参数：
    * **USER**：用户名称
    * **PASS**：MD5后的密码
    * **EXTRA**：设备相关的数据（待定）
* 返回：
    * **CODE**：401 密码错误；403 踢出需重新登录；更多待定...
    * **INFO**：另行说明
    * **DATA**：
    
			{
				TOKEN:"xxxxxxx", // 验签信息
			}

* 测试：<https://raw.githubusercontent.com/Yonsm/CeleWare/master/BabyNas/LOGIN.json?USER=user&PASS=pass&EXTRA=extra>

##2. 获取首页数据（可能和登录接口合并以减少网络请求）

统一分页机制（如果有需求）

##3. 创建顾客

##4. 搜索顾客

##5. 创建订单

##6. 获取媒体消息

传入本地最新一条媒体的ID

##7. 获取通知消息

传入本地最新一条通知的ID

##8. 定期上传设备信息
